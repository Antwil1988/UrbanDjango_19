# дескрипторы позволяют задавать точки доступа к атрибутам объекта, добавляя дополнительную логику, когда атрибут читается, записывается или удаляется

Основные методы
Протокол дескриптора в Python определяется наличием методов __get__, __set__ и __delete__ в классе. Эти методы позволяют объектам управлять тем, как значения атрибутов извлекаются, устанавливаются или удаляются. Также существует необязательный метод __set_name__, который позволяет дескриптору узнавать имя атрибута, к которому он присвоен в классе.

## Метод __get__

вызывается, когда значение атрибута извлекается, он принимает два аргумента: self и instance. instance - это экземпляр объекта, через который доступен дескриптор, или None, если обращение идет через класс. Возвращаемое значение этого метода будет значением указанного атрибута:

    class Descriptor:
        def __get__(self, instance, owner):
            return 'значение'
    
    class MyClass:
        attr = Descriptor()
    
    my_object = MyClass()
    print(my_object.attr)  # выведет 'значение'

## Метод __set__

позволяет управлять изменением значения атрибута. Он принимает три аргумента: self, instance и value, где value - это новое значение атрибута:

    class Descriptor:
        def __set__(self, instance, value):
            print(f"Установка значения {value}")
            self.__value = value
    
    class MyClass:
        attr = Descriptor()
    
    my_object = MyClass()
    my_object.attr = 10  # выведет 'Установка значения 10'

## Метод__delete__

вызывается при удалении атрибута с использованием оператора del. Он принимает два аргумента: self и instance:

    class Descriptor:
        def __delete__(self, instance):
            print("Удаление атрибута")
            del self.__value
    
    class MyClass:
        attr = Descriptor()
    
    my_object = MyClass()
    del my_object.attr  # выведет 'Удаление атрибута'

## Необязательный метод __set_name__

 вызывается в момент создания класса для каждого дескриптора, что позволяет дескриптору знать имя атрибута, к которому он привязан. Этот метод принимает два аргумента: self и name, где name - это имя атрибута

    class Descriptor:
        def __set_name__(self, owner, name):
            self.public_name = name
            self.private_name = '_' + name
    
        def __get__(self, instance, owner):
            return getattr(instance, self.private_name, 'еще не установлено')
    
        def __set__(self, instance, value):
            setattr(instance, self.private_name, value)
    
    class MyClass:
        attr = Descriptor()
    
    my_object = MyClass()
    print(my_object.attr)  # выведет 'еще не установлено'
    my_object.attr = 99
    print(my_object.attr)  # выведет 99

## Примеры использования

Создадим дескриптор для валидации данных, который будет проверять, что возраст пользователя не может быть отрицательным числом и не может превышать 100 лет:

    class ValidateAge:
        def __set_name__(self, owner, name):
            self.private_name = '_' + name

    def __get__(self, instance, owner):
        return getattr(instance, self.private_name, None)

    def __set__(self, instance, value):
        if not (0 <= value <= 100):
            raise ValueError("Возраст должен быть между 0 и 100 годами")
        setattr(instance, self.private_name, value)
    
    class Person:
        age = ValidateAge()

    def __init__(self, name, age):
        self.name = name
        self.age = age

    try:
        p = Person("Kolya", 30)  # валидный возраст
        print(p.age)
        p.age = -5  # невалидный возраст, будет вызвано исключение ValueError
    except ValueError as e:
        print(e)
